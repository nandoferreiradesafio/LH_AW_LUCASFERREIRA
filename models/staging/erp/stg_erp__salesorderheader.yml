version: 2

models:
  - name: stg_erp__salesorderheader
    description: 'Tabela que armazena informações sobre os pedidos de venda no sistema ERP.'
    columns:
      - name: pk_pedido_venda
        description: 'Chave primária que identifica unicamente o pedido de venda.'
        tests:
          - unique
          - not_null
      - name: numero_revisao
        description: 'Número de revisão do pedido de venda.'
        tests:
          - not_null
      - name: data_pedido
        description: 'Data em que o pedido de venda foi realizado.'
        tests:
          - not_null
      - name: data_vencimento
        description: 'Data de vencimento do pedido de venda.'
        tests:
          - not_null
      - name: data_envio
        description: 'Data em que o pedido de venda foi enviado.'
      - name: status_pedido
        description: 'Status atual do pedido de venda.'
        tests:
          - not_null
          - accepted_values:
              values: [
                'Em processo',
                'Aprovado',
                'Pedido em espera',
                'Rejeitado',
                'Enviado',
                'Cancelado'
              ]
      - name: indicador_pedido_online
        description: 'Indica se o pedido foi feito online.'
        tests:
          - not_null
      - name: numero_ordem_compra
        description: 'Número da ordem de compra associada ao pedido de venda.'
      - name: numero_conta
        description: 'Número da conta associada ao pedido de venda.'
      - name: fk_cliente
        description: 'Chave estrangeira que referencia o cliente associado ao pedido de venda.'
        tests:
          - not_null
          - relationships:
              to: ref('customer')
              field: customerid
      - name: fk_vendedor
        description: 'Chave estrangeira que referencia o vendedor associado ao pedido de venda.'
      - name: fk_territorio
        description: 'Chave estrangeira que referencia o território associado ao pedido de venda.'
        tests:
          - not_null
          - relationships:
              to: ref('salesterritory')
              field: territoryid
      - name: fk_endereco_faturamento
        description: 'Chave estrangeira que referencia o endereço de faturamento associado ao pedido de venda.'
      - name: fk_endereco_envio
        description: 'Chave estrangeira que referencia o endereço de envio associado ao pedido de venda.'
      - name: fk_metodo_envio
        description: 'Chave estrangeira que referencia o método de envio associado ao pedido de venda.'
        tests:
          - not_null
          - relationships:
              to: ref('shipmethod')
              field: shipmethodid
      - name: fk_cartao_credito
        description: 'Chave estrangeira que referencia o cartão de crédito associado ao pedido de venda.'
        tests:
          - relationships:
              to: ref('creditcard')
              field: creditcardid
      - name: codigo_aprovacao_cartao
        description: 'Código de aprovação do cartão de crédito usado no pedido de venda.'
      - name: fk_taxa_cambio
        description: 'Chave estrangeira que referencia a taxa de câmbio usada no pedido de venda.'
      - name: subtotal
        description: 'Subtotal do pedido de venda.'
        tests:
          - not_null
      - name: valor_imposto
        description: 'Valor do imposto aplicado ao pedido de venda.'
        tests:
          - not_null
      - name: frete
        description: 'Valor do frete aplicado ao pedido de venda.'
        tests:
          - not_null
      - name: total_pagar
        description: 'Valor total devido pelo pedido de venda.'
        tests:
          - not_null
      - name: comentario
        description: 'Comentários adicionais relacionados ao pedido de venda.'
      - name: data_modificacao
        description: 'Data da última modificação das informações do pedido de venda.'
        tests:
          - not_null
